<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agricultural Weather Intelligence - Advanced Meteorological Analysis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600;700&display=swap');
    
    :root {
      --egypt-blue: #0b3d91;
      --egypt-red: #c8102e;
      --egypt-gold: #d4af37;
      --egypt-dark: #061f4a;
      --egypt-light: #1a6bc4;
      --deep-space: #050a1c;
      --nile-green: #006400;
      --desert-sand: #f4d03f;
    }
    
    * {
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }
    
    body {
      font-family: 'Exo 2', sans-serif;
      color: #ffffff;
      overflow-y: auto;
    }
    
    /* Photo Background */
    .photo-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: url('36_60f86657.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      z-index: -2;
    }
    
    /* Background Overlay */
    .bg-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(5, 10, 28, 0.7);
      z-index: -1;
      pointer-events: none;
    }
    
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(2px 2px at 20px 30px, #eee, transparent),
        radial-gradient(2px 2px at 40px 70px, #fff, transparent),
        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
        radial-gradient(1px 1px at 130px 80px, #fff, transparent),
        radial-gradient(2px 2px at 160px 30px, #ddd, transparent);
      background-repeat: repeat;
      background-size: 200px 100px;
      animation: twinkle 8s ease-in-out infinite alternate;
      z-index: 0;
      pointer-events: none;
      display: none; /* Hidden when using photo background */
    }
    
    @keyframes twinkle {
      0% { opacity: 0.3; }
      100% { opacity: 0.8; }
    }
    
    .nebula {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 30%, rgba(11, 61, 145, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(200, 16, 46, 0.05) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(212, 175, 55, 0.08) 0%, transparent 50%);
      z-index: 0;
      pointer-events: none;
      display: none; /* Hidden when using photo background */
    }
    
    .satellite {
      position: fixed;
      top: 20%;
      right: -100px;
      animation: satelliteMove 30s linear infinite;
      z-index: 1;
      pointer-events: none;
    }
    
    @keyframes satelliteMove {
      0% { transform: translateX(0) translateY(0) rotate(0deg); }
      25% { transform: translateX(-50vw) translateY(50px) rotate(90deg); }
      50% { transform: translateX(-100vw) translateY(0) rotate(180deg); }
      75% { transform: translateX(-50vw) translateY(-50px) rotate(270deg); }
      100% { transform: translateX(0) translateY(0) rotate(360deg); }
    }
    
    @keyframes pyramidGlow {
      0% { box-shadow: 0 0 10px rgba(212, 175, 55, 0.3); }
      100% { box-shadow: 0 0 40px rgba(212, 175, 55, 0.7); }
    }
    
    .nile-river {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: linear-gradient(to top, rgba(0, 100, 0, 0.3), transparent);
      z-index: 0;
      pointer-events: none;
    }
    
    .card {
      background: rgba(16, 22, 36, 0.8);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      border-color: rgba(255, 255, 255, 0.15);
    }
    
    .form-input {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 14px 16px;
      color: white;
      width: 100%;
      transition: all 0.3s ease;
      font-family: 'Exo 2', sans-serif;
    }
    
    .form-input:focus {
      outline: none;
      border-color: var(--egypt-blue);
      box-shadow: 0 0 0 3px rgba(11, 61, 145, 0.3);
      background: rgba(255, 255, 255, 0.08);
    }
    
    .form-select {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 14px 16px;
      color: white;
      width: 100%;
      transition: all 0.3s ease;
      font-family: 'Exo 2', sans-serif;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
      background-size: 16px;
    }
    
    .form-select:focus {
      outline: none;
      border-color: var(--egypt-blue);
      box-shadow: 0 0 0 3px rgba(11, 61, 145, 0.3);
      background-color: rgba(255, 255, 255, 0.08);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--egypt-blue), var(--egypt-dark));
      color: white;
      border: none;
      border-radius: 8px;
      padding: 16px 28px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Exo 2', sans-serif;
      font-size: 1rem;
      position: relative;
      overflow: hidden;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: 0.5s;
    }
    
    .btn-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(11, 61, 145, 0.5);
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }
    
    .btn-agriculture {
      background: linear-gradient(135deg, var(--nile-green), #008000);
    }
    
    .weather-icon {
      font-size: 2.5rem;
      margin-right: 12px;
      animation: float 8s ease-in-out infinite;
      filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.3));
    }
    
    @keyframes float {
      0% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-15px) rotate(5deg); }
      66% { transform: translateY(10px) rotate(-5deg); }
      100% { transform: translateY(0px) rotate(0deg); }
    }
    
    .pulse {
      animation: pulse 3s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(11, 61, 145, 0.7); }
      50% { transform: scale(1.05); box-shadow: 0 0 0 15px rgba(11, 61, 145, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(11, 61, 145, 0); }
    }
    
    .fade-in {
      animation: fadeIn 1s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .slide-up {
      animation: slideUp 0.8s ease-out;
    }
    
    @keyframes slideUp {
      from { 
        opacity: 0;
        transform: translateY(40px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .rain-animation {
      position: relative;
      overflow: hidden;
    }
    
    .rain-animation::after {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%2300a8ff' d='M50,10 L52,15 L57,15 L53,19 L55,24 L50,21 L45,24 L47,19 L43,15 L48,15 Z'/%3E%3C/svg%3E") repeat;
      opacity: 0.2;
      animation: rainFall 12s linear infinite;
      pointer-events: none;
    }
    
    @keyframes rainFall {
      0% { transform: translateY(-100%) rotate(0deg); }
      100% { transform: translateY(100%) rotate(360deg); }
    }
    
    .cloud-move {
      animation: cloudMove 25s linear infinite;
    }
    
    @keyframes cloudMove {
      0% { transform: translateX(-100px); }
      100% { transform: translateX(100px); }
    }
    
    .sun-spin {
      animation: sunSpin 30s linear infinite;
    }
    
    @keyframes sunSpin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .typing-animation {
      overflow: hidden;
      border-right: 2px solid var(--egypt-blue);
      white-space: nowrap;
      margin: 0 auto;
      animation: typing 4s steps(50, end), blink-caret 0.75s step-end infinite;
    }
    
    @keyframes typing {
      from { width: 0 }
      to { width: 100% }
    }
    
    @keyframes blink-caret {
      from, to { border-color: transparent }
      50% { border-color: var(--egypt-blue) }
    }
    
    .meteor {
      position: fixed;
      width: 3px;
      height: 3px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1),
                  0 0 0 8px rgba(255, 255, 255, 0.1),
                  0 0 30px rgba(255, 255, 255, 1);
      animation: meteorFall 4s linear infinite;
      z-index: 0;
      pointer-events: none;
    }
    
    @keyframes meteorFall {
      0% {
        transform: translateX(0) translateY(0) rotate(45deg);
        opacity: 1;
      }
      70% {
        opacity: 1;
      }
      100% {
        transform: translateX(500px) translateY(500px) rotate(45deg);
        opacity: 0;
      }
    }
    
    /* Logo Styles */
    .app-logo {
      display: flex;
      align-items: center;
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
      font-size: 1.8rem;
      letter-spacing: 1px;
    }
    
    .app-logo-image {
      height: 50px;
      width: auto;
      margin-right: 12px;
    }
    
    .app-logo-text {
      background: linear-gradient(90deg, #fff, var(--nile-green), var(--desert-sand));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-left: 12px;
      text-shadow: 0 0 20px rgba(22, 87, 129, 0.3));
    }
    
    .app-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--nile-green), var(--egypt-dark));
      color: white;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 0.8rem;
      margin-left: 12px;
      font-weight: 600;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 12px rgba(30, 80, 145, 0.3);
    }
    
    /* Enhanced UI Elements */
    .progress-bar {
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      overflow: hidden;
      margin: 20px 0;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--nile-green), var(--egypt-blue));
      border-radius: 3px;
      transition: width 0.5s ease;
      box-shadow: 0 0 10px rgba(0, 100, 0, 0.5);
    }
    
    .data-card {
      background: rgba(16, 22, 36, 0.7);
      border-radius: 12px;
      padding: 20px;
      border-left: 4px solid var(--nile-green);
      transition: all 0.3s ease;
      height: 100%;
    }
    
    .data-card:hover {
      transform: translateY(-8px);
      background: rgba(16, 22, 36, 0.8);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }
    
    .tooltip {
      position: relative;
    }
    
    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 0.8rem;
      white-space: nowrap;
      z-index: 100;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    /* Loading animation */
    .loading-dots {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }
    
    .loading-dots div {
      position: absolute;
      top: 33px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--nile-green);
      animation-timing-function: cubic-bezier(0, 1, 1, 0);
      box-shadow: 0 0 10px var(--nile-green);
    }
    
    .loading-dots div:nth-child(1) {
      left: 8px;
      animation: loading-dots1 0.6s infinite;
    }
    
    .loading-dots div:nth-child(2) {
      left: 8px;
      animation: loading-dots2 0.6s infinite;
    }
    
    .loading-dots div:nth-child(3) {
      left: 32px;
      animation: loading-dots2 0.6s infinite;
    }
    
    .loading-dots div:nth-child(4) {
      left: 56px;
      animation: loading-dots3 0.6s infinite;
    }
    
    @keyframes loading-dots1 {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }
    
    @keyframes loading-dots3 {
      0% { transform: scale(1); }
      100% { transform: scale(0); }
    }
    
    @keyframes loading-dots2 {
      0% { transform: translate(0, 0); }
      100% { transform: translate(24px, 0); }
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .app-logo {
        font-size: 1.4rem;
      }
      
      .container {
        padding-left: 1rem;
        padding-right: 1rem;
      }
      
      .card {
        padding: 1.5rem;
      }
      
      .btn-primary {
        padding: 14px 20px;
      }
    }
    
    /* Data visualization */
    .weather-radar {
      position: relative;
      height: 200px;
      background: radial-gradient(circle, rgba(59,130,246,0.1) 0%, rgba(0,0,0,0) 70%);
      border-radius: 12px;
      overflow: hidden;
      margin-top: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .radar-sweep {
      position: absolute;
      width: 100%;
      height: 100%;
      background: conic-gradient(from 0deg, transparent, rgba(59,130,246,0.3) 10%, transparent 30%);
      animation: radarSweep 4s linear infinite;
    }
    
    @keyframes radarSweep {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .radar-dot {
      position: absolute;
      width: 10px;
      height: 10px;
      background: rgba(59,130,246,0.7);
      border-radius: 50%;
      animation: pulse 2s infinite;
      box-shadow: 0 0 10px rgba(59,130,246,0.7);
    }
    
    /* Enhanced grid for forecast */
    .forecast-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 16px;
    }
    
    /* Header gradient */
    .header-gradient {
      background: linear-gradient(135deg, rgba(11, 61, 145, 0.1) 0%, rgba(6, 31, 74, 0.2) 100%);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    /* Enhanced footer */
    .footer-gradient {
      background: linear-gradient(180deg, transparent 0%, rgba(6, 31, 74, 0.3) 100%);
      border-top: 1px solid rgba(255, 255, 255, 0.05);
    }
    
    /* Fix for z-index issues */
    .content-wrapper {
      position: relative;
      z-index: 10;
    }
    
    /* Custom dropdown styles */
    select option {
      background-color: #0f172a;
      color: white;
    }
    
    /* Navigation styles */
    .nav-link {
      color: rgba(255, 255, 255, 0.7);
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .nav-link:hover {
      color: white;
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .nav-link.active {
      color: white;
      background-color: rgba(0, 100, 0, 0.3);
    }
    
    /* Team member styles */
    .team-member {
      transition: all 0.3s ease;
    }
    
    .team-member:hover {
      transform: translateY(-5px);
    }
    
    .team-leader {
      border: 2px solid var(--egypt-red);
      box-shadow: 0 0 15px rgba(200, 16, 46, 0.3);
    }
    
    /* Crop-specific styles */
    .crop-card {
      background: rgba(16, 22, 36, 0.7);
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
      height: 100%;
      border-top: 4px solid var(--nile-green);
    }
    
    .crop-card:hover {
      transform: translateY(-5px);
      background: rgba(16, 22, 36, 0.8);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    }
    
    .soil-moisture-bar {
      height: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 5px;
      overflow: hidden;
      margin: 10px 0;
    }
    
    .soil-moisture-fill {
      height: 100%;
      background: linear-gradient(90deg, #8B4513, #CD853F);
      border-radius: 5px;
      transition: width 0.5s ease;
    }
    
    .agriculture-icon {
      font-size: 2rem;
      margin-bottom: 10px;
      color: var(--nile-green);
    }
    
    .season-indicator {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .season-winter {
      background: rgba(59, 130, 246, 0.3);
      color: #93c5fd;
    }
    
    .season-summer {
      background: rgba(245, 158, 11, 0.3);
      color: #fcd34d;
    }
    
    .season-spring {
      background: rgba(34, 197, 94, 0.3);
      color: #86efac;
    }
    
    .season-autumn {
      background: rgba(249, 115, 22, 0.3);
      color: #fdba74;
    }
    
    /* Irrigation recommendation */
    .irrigation-level {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    .irrigation-high {
      background: rgba(59, 130, 246, 0.3);
      color: #93c5fd;
    }
    
    .irrigation-medium {
      background: rgba(34, 197, 94, 0.3);
      color: #86efac;
    }
    
    .irrigation-low {
      background: rgba(245, 158, 11, 0.3);
      color: #fcd34d;
    }
    
    /* Alert styles */
    .alert {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
    }
    
    .alert-warning {
      background: rgba(245, 158, 11, 0.2);
      border-left: 4px solid #f59e0b;
    }
    
    .alert-info {
      background: rgba(59, 130, 246, 0.2);
      border-left: 4px solid #3b82f6;
    }
    
    .alert-success {
      background: rgba(34, 197, 94, 0.2);
      border-left: 4px solid #22c55e;
    }
    
    .alert-danger {
      background: rgba(239, 68, 68, 0.2);
      border-left: 4px solid #ef4444;
    }
    
    /* Nile water level indicator */
    .nile-level {
      height: 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
      position: relative;
    }
    
    .nile-level-fill {
      height: 100%;
      background: linear-gradient(90deg, #1e40af, #3b82f6);
      border-radius: 10px;
      transition: width 0.5s ease;
    }
    
    .nile-level-text {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 600;
    }
    
    /* Dashboard stats */
    .stat-card {
      background: rgba(16, 22, 36, 0.7);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      background: rgba(16, 22, 36, 0.8);
    }
    
    .stat-value {
      font-size: 2.5rem;
      font-weight: bold;
      margin: 10px 0;
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: #9ca3af;
    }
    
    /* Market prices */
    .price-up {
      color: #10b981;
    }
    
    .price-down {
      color: #ef4444;
    }
    
    .price-stable {
      color: #6b7280;
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Photo Background -->
  <div class="photo-bg"></div>
  
  <!-- Background Overlay -->
  <div class="bg-overlay"></div>
  
  <div class="stars"></div>
  <div class="nebula"></div>
  <div class="satellite">
    <i class="fas fa-satellite text-white text-2xl"></i>
  </div>
  <div class="pyramid"></div>
  <div class="nile-river"></div>
  
  <!-- Add meteors -->
  <div class="meteor" style="top: 10%; left: 10%; animation-delay: 0s;"></div>
  <div class="meteor" style="top: 20%; left: 20%; animation-delay: 1.5s;"></div>
  <div class="meteor" style="top: 30%; left: 30%; animation-delay: 3s;"></div>
  <div class="meteor" style="top: 15%; left: 15%; animation-delay: 4.5s;"></div>
  
  <div id="root" class="min-h-screen relative z-10 content-wrapper"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    function App() {
      const [step, setStep] = useState(1);
      const [currentPage, setCurrentPage] = useState('home');
      const [governorates, setGovernorates] = useState([]);
      const [cities, setCities] = useState([]);
      const [formData, setFormData] = useState({
        governorate: '',
        city: '',
        date: '',
        forecast_period: '1 day',
        crop_type: '',
        soil_type: '',
        farm_size: '',
        irrigation_type: '',
      });
      const [weatherData, setWeatherData] = useState(null);
      const [advice, setAdvice] = useState(null);
      const [alerts, setAlerts] = useState([]);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');
      const [currentTime, setCurrentTime] = useState(new Date());
      const [progress, setProgress] = useState(0);
      const [isInitialLoad, setIsInitialLoad] = useState(true);
      const [marketPrices, setMarketPrices] = useState({});
      const [nileLevel, setNileLevel] = useState(75);
      
      // Team data
      const teamMembers = [
        { name: 'Mohaned Nasser', role: 'Team Leader', isLeader: true },
        { name: 'Areej Mohammed', role: '', isLeader: false },
        { name: 'Shaza Mohammed', role: '', isLeader: false },
        { name: 'Rahma Ashraf', role: '', isLeader: false },
        { name: 'Ahmed Gamal', role: '', isLeader: false },
        { name: 'Abdelrahman Ahmed', role: '', isLeader: false }
      ];
      
      // Egypt-specific data with ALL cities
      const egyptData = useRef({
        governorates: [
          'Cairo', 'Alexandria', 'Giza', 'Qalyubia', 'Port Said', 'Suez', 'Luxor', 
          'Aswan', 'Red Sea', 'New Valley', 'Matrouh', 'South Sinai', 'North Sinai',
          'Ismailia', 'Gharbia', 'Dakahlia', 'Sharqia', 'Monufia', 'Beheira', 
          'Faiyum', 'Beni Suef', 'Minya', 'Asyut', 'Sohag', 'Qena', 'Luxor',
          'Damietta', 'Kafr El Sheikh'
        ],
        cities: {
          'Cairo': [
            'Downtown Cairo', 'Heliopolis', 'Nasr City', 'Maadi', 'Zamalek', 'Garden City', 'Mohandessin',
            'El Marg', 'Shubra', 'Rod El Farag', 'El Basatin', 'El Khalifa', 'El Darb El Ahmar', 'El Muski',
            'Bab El Sharia', 'El Gamaliya', 'El Zaher', 'El Waily', 'El Sahel', 'El Sharabiya', 'El Salam',
            'El Nozha', 'Ain Shams', 'El Mataria', 'El Tebbin', 'Hadayek El Qobba', 'El Marg', 'El Salam City',
            'Badr City', 'El Shorouk City', 'New Cairo', 'El Obour City', '15th of May City'
          ],
          'Alexandria': [
            'Al Montazah', 'Al Amiriyya', 'Al Attarin', 'Al Gomrok', 'Al Labban', 'Al Mansheya', 'Al Maks',
            'Borg El Arab', 'Karmouz', 'El Raml', 'Sidi Gaber', 'Smouha', 'Miami', 'Sidi Bishr', 'Asafra',
            'Mandara', 'Maamoura', 'Victoria', 'San Stefano', 'Gleem', 'Rushdy', 'Luran', 'Kabbary', 'Wardeyan',
            'Moharam Bek', 'El Hadara', 'El Agamy', 'Dekhela', 'Abu Qir', 'King Mariout'
          ],
          'Giza': [
            'Giza City', 'Dokki', 'Agouza', 'Haram', 'Faisal', 'Bulaq', 'Imbaba', 'El Warraq', 'El Omraniya',
            'Kerdasa', 'El Ayyat', 'El Badrasheen', 'El Saff', 'Atfih', 'El Hawamdiya', 'Ossim', 'Abu El Numrus',
            'Kafr Hakim', 'El Mansuriya', 'Saqqara', 'Abu Rawash', 'Mit Rahina', 'Dahshur', 'Barageel'
          ],
          'Qalyubia': [
            'Banha', 'Qalyub', 'Shubra El Kheima', 'Khanka', 'Kafr Shukr', 'Tukh', 'Qaha', 'Shibin El Qanater',
            'El Qanater El Khayriyyah', 'Berket El Sab', 'Kafr El Gazar', 'El Kulzom', 'Khosous', 'Saryaqos'
          ],
          'Port Said': [
            'Port Fouad', 'Al Arab', 'Al Dawahi', 'Al Manakh', 'Al Manasra', 'Al Sharq', 'Al Zohour',
            'Al Ganoub', 'Al Hay', 'Al Mohafza', 'Al Rawda', 'Al Salam', 'Al Saraya', 'Al Shohada'
          ],
          'Suez': [
            'Suez City', 'Al Ganayen', 'Arbaeen', 'Faisal', 'Attaka', 'Al Adabiya', 'Al Zaytiya'
          ],
          'Luxor': [
            'Luxor City', 'Karnak', 'Al Bayadiyah', 'Al Zenyah', 'Al Qarna', 'Al Tud', 'Armant', 'Esna',
            'New Tiba', 'New Qurna', 'Zainiya'
          ],
          'Aswan': [
            'Aswan City', 'Abu Simbel', 'Kom Ombo', 'Edfu', 'Daraw', 'Nasr Al Nuba', 'Kalabsha', 'Seheil Island',
            'Elephantine Island', 'Philae', 'High Dam', 'New Aswan', 'New Abu Simbel'
          ],
          'Red Sea': [
            'Hurghada', 'Marsa Alam', 'El Gouna', 'Safaga', 'Al Qusair', 'Ras Ghareb', 'Shalateen', 'Halayeb',
            'Sahl Hasheesh', 'Makadi Bay', 'Soma Bay'
          ],
          'New Valley': [
            'Kharga', 'Dakhla', 'Farafra', 'Baris', 'Mut', 'Balat', 'Bashindi', 'Paris', 'Maks Qibli'
          ],
          'Matrouh': [
            'Marsa Matrouh', 'El Alamein', 'Sidi Barrani', 'Sallum', 'Siwa Oasis', 'Nag Hammadi', 'Fuka',
            'Dabaa', 'Negilla'
          ],
          'South Sinai': [
            'Sharm El Sheikh', 'Dahab', 'Nuweiba', 'Saint Catherine', 'Ras Sedr', 'Abu Redis', 'Taba', 'El Tor',
            'Abu Zenima', 'Nakhl'
          ],
          'North Sinai': [
            'Al Arish', 'Sheikh Zuweid', 'Rafah', 'Bir al-Abd', 'Al Hassana', 'Nakhl', 'Al Qantarah'
          ],
          'Ismailia': [
            'Ismailia City', 'Fayed', 'Al Qantara', 'Tell al-Kebir', 'Abu Suwir', 'Al Qantara Gharb'
          ],
          'Gharbia': [
            'Tanta', 'Al Mahalla Al Kubra', 'Kafr El Zayat', 'Basyoun', 'Zefta', 'Samannoud', 'Qutur', 'El Santa'
          ],
          'Dakahlia': [
            'Mansoura', 'Talkha', 'Mit Ghamr', 'Aga', 'El Senbellawein', 'Manzala', 'Dekernes', 'El Kurdi',
            'Bani Ebeid', 'El Matareya', 'Gamasa', 'Sherbin', 'Nabaruh', 'Minyet El Nasr'
          ],
          'Sharqia': [
            'Zagazig', '10th of Ramadan City', 'Minya Al Qamh', 'Belbeis', 'Al Husayniyah', 'Abu Hammad',
            'El Qurein', 'Hehya', 'Abu Kebir', 'Faqous', 'El Salheya El Gedida', 'Mashtoul El Souq', 'Kafr Saqr'
          ],
          'Monufia': [
            'Shibin El Kom', 'Sadat City', 'Menouf', 'Ashmoun', 'Quesna', 'Birket El Sab', 'El Bagour',
            'Tala', 'El Shohada'
          ],
          'Beheira': [
            'Damanhur', 'Kafr El Dawwar', 'Rashid', 'Abu al-Matamir', 'Hosh Essa', 'Shubrakhit', 'Kom Hamada',
            'El Mahmoudia', 'Etay El Barud', 'Abu Homos', 'El Delengat', 'Wadi El Natrun'
          ],
          'Faiyum': [
            'Faiyum City', 'Ibsheway', 'Tamiya', 'Sinnuris', 'Yousef El Seddik', 'New Faiyum'
          ],
          'Beni Suef': [
            'Beni Suef City', 'Al Wasta', 'Nasser', 'Biba', 'Sumusta', 'El Fashn'
          ],
          'Minya': [
            'Minya City', 'Beni Mazar', 'Matay', 'Samalut', 'Abu Qurqas', 'Mallawi', 'Deir Mawas', 'New Minya'
          ],
          'Asyut': [
            'Asyut City', 'Abnub', 'Abu Tig', 'El Badari', 'El Qusiya', 'Manfalut', 'Dairut', 'El Fath',
            'Sahel Selim', 'New Asyut'
          ],
          'Sohag': [
            'Sohag City', 'Akhmim', 'El Balyana', 'El Maragha', 'Juhayna', 'Dar El Salam', 'El Monshah',
            'Gerga', 'New Sohag', 'Tima', 'Tahta', 'Al-osayrat'
          ],
          'Qena': [
            'Qena City', 'Abu Tesht', 'Farshout', 'Naqada', 'Qus', 'New Qena', 'Dishna'
          ],
          'Damietta': [
            'Damietta City', 'New Damietta', 'Ras El Bar', 'Kafr Saad', 'Faraskur', 'Zarqa'
          ],
          'Kafr El Sheikh': [
            'Kafr El Sheikh City', 'Desouk', 'Fuwwah', 'Metoubes', 'Bila', 'El Reyad', 'El Hamool', 'Sidi Salim'
          ]
        },
        weather: {
          'Cairo': { temp: 28, humidity: 40, condition: 'Sunny', rainChance: 5, windSpeed: 15, pressure: 1013 },
          'Alexandria': { temp: 25, humidity: 65, condition: 'Partly Cloudy', rainChance: 20, windSpeed: 20, pressure: 1010 },
          'Giza': { temp: 29, humidity: 35, condition: 'Sunny', rainChance: 5, windSpeed: 12, pressure: 1012 },
          'Luxor': { temp: 35, humidity: 20, condition: 'Sunny', rainChance: 0, windSpeed: 10, pressure: 1008 },
          'Aswan': { temp: 38, humidity: 15, condition: 'Sunny', rainChance: 0, windSpeed: 8, pressure: 1005 },
          'Hurghada': { temp: 30, humidity: 50, condition: 'Sunny', rainChance: 5, windSpeed: 25, pressure: 1011 },
          'Sharm El Sheikh': { temp: 32, humidity: 45, condition: 'Sunny', rainChance: 0, windSpeed: 18, pressure: 1010 },
          'Tanta': { temp: 27, humidity: 55, condition: 'Partly Cloudy', rainChance: 15, windSpeed: 14, pressure: 1012 },
          'Mansoura': { temp: 26, humidity: 60, condition: 'Partly Cloudy', rainChance: 20, windSpeed: 16, pressure: 1011 },
          'Zagazig': { temp: 28, humidity: 50, condition: 'Sunny', rainChance: 10, windSpeed: 13, pressure: 1012 },
          'Shibin El Kom': { temp: 27, humidity: 55, condition: 'Partly Cloudy', rainChance: 15, windSpeed: 14, pressure: 1012 },
          'Damanhur': { temp: 26, humidity: 60, condition: 'Partly Cloudy', rainChance: 20, windSpeed: 16, pressure: 1011 },
          'Faiyum': { temp: 30, humidity: 35, condition: 'Sunny', rainChance: 5, windSpeed: 12, pressure: 1010 },
          'Beni Suef': { temp: 32, humidity: 30, condition: 'Sunny', rainChance: 5, windSpeed: 10, pressure: 1009 },
          'Minya': { temp: 33, humidity: 25, condition: 'Sunny', rainChance: 5, windSpeed: 11, pressure: 1008 },
          'Asyut': { temp: 34, humidity: 22, condition: 'Sunny', rainChance: 5, windSpeed: 10, pressure: 1007 },
          'Sohag': { temp: 35, humidity: 20, condition: 'Sunny', rainChance: 5, windSpeed: 9, pressure: 1006 },
          'Qena': { temp: 36, humidity: 18, condition: 'Sunny', rainChance: 5, windSpeed: 8, pressure: 1005 },
        },
        crops: [
          'Wheat', 'Corn', 'Rice', 'Cotton', 'Sugarcane', 'Tomatoes', 'Potatoes',
          'Citrus (Oranges)', 'Grapes', 'Dates', 'Olives', 'Onions', 'Beans',
          'Lentils', 'Barley', 'Sesame', 'Sunflower', 'Alfalfa'
        ],
        soilTypes: [
          'Sandy Soil', 'Clay Soil', 'Silty Soil', 'Peaty Soil', 'Chalky Soil', 'Loamy Soil'
        ],
        farmSizes: [
          'Small (Less than 1 acre)', 'Medium (1-5 acres)', 'Large (5-20 acres)', 'Very Large (20+ acres)'
        ],
        irrigationTypes: [
          'Surface Irrigation', 'Drip Irrigation', 'Sprinkler Irrigation', 'Center Pivot', 'Manual Watering'
        ]
      });

      // Create mock weather data for cities not in the list
      useEffect(() => {
        Object.values(egyptData.current.cities).flat().forEach(city => {
          if (!egyptData.current.weather[city]) {
            // Generate realistic weather for Egyptian cities
            const baseTemp = 25 + Math.floor(Math.random() * 15);
            const baseHumidity = 15 + Math.floor(Math.random() * 50);
            const isCoastal = ['Alexandria', 'Port Said', 'Suez', 'Hurghada', 'Sharm El Sheikh', 'Marsa Matrouh', 'Damietta'].some(gov => 
              egyptData.current.cities[gov]?.includes(city)
            );
            
            egyptData.current.weather[city] = {
              temp: baseTemp,
              humidity: isCoastal ? baseHumidity + 20 : baseHumidity,
              condition: isCoastal && Math.random() > 0.7 ? 'Partly Cloudy' : 'Sunny',
              rainChance: isCoastal ? Math.floor(Math.random() * 30) : Math.floor(Math.random() * 10),
              windSpeed: isCoastal ? 15 + Math.floor(Math.random() * 15) : 8 + Math.floor(Math.random() * 12),
              pressure: 1005 + Math.floor(Math.random() * 15)
            };
          }
        });
      }, []);

      // Initialize market prices
      useEffect(() => {
        const prices = {};
        egyptData.current.crops.forEach(crop => {
          const basePrice = 100 + Math.floor(Math.random() * 1000);
          const change = (Math.random() * 20 - 10).toFixed(2);
          prices[crop] = {
            price: basePrice,
            change: parseFloat(change),
            unit: crop === 'Cotton' ? 'per Kantar' : 'per Ton'
          };
        });
        setMarketPrices(prices);
      }, []);

      useEffect(() => {
        const timer = setInterval(() => {
          setCurrentTime(new Date());
        }, 1000);
        
        // Initial data loading
        setLoading(true);
        const progressInterval = setInterval(() => {
          setProgress(prev => {
            if (prev >= 100) {
              clearInterval(progressInterval);
              setLoading(false);
              setIsInitialLoad(false);
              return 100;
            }
            return prev + 10;
          });
        }, 150);
        
        setTimeout(() => {
          setGovernorates(egyptData.current.governorates);
        }, 1000);
        
        return () => {
          clearInterval(timer);
          clearInterval(progressInterval);
        };
      }, []);

      const validateDate = (dateString) => {
        if (!dateString) {
          return { valid: false, message: 'Please select a date' };
        }
        
        const selectedDate = new Date(dateString);
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        
        if (isNaN(selectedDate.getTime())) {
          return { valid: false, message: 'Please enter a valid date' };
        }
        
        if (selectedDate < today) {
          return { valid: false, message: 'Please select a date from today onwards' };
        }
        
        // Limit to 1 year in the future for realistic forecasting
        const oneYearFromNow = new Date();
        oneYearFromNow.setFullYear(oneYearFromNow.getFullYear() + 1);
        
        if (selectedDate > oneYearFromNow) {
          return { valid: false, message: 'Forecast limited to 1 year in the future' };
        }
        
        return { valid: true };
      };

      const handleGovernorateChange = (e) => {
        const governorate = e.target.value;
        setFormData({ ...formData, governorate, city: '' });
        setCities([]);
        
        if (governorate && egyptData.current.cities[governorate]) {
          setLoading(true);
          setProgress(0);
          const progressInterval = setInterval(() => {
            setProgress(prev => {
              if (prev >= 100) {
                clearInterval(progressInterval);
                setLoading(false);
                return 100;
              }
              return prev + 20;
            });
          }, 100);
          
          setTimeout(() => {
            setCities(egyptData.current.cities[governorate]);
          }, 500);
        }
      };

      const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
        
        // Clear error when user starts typing
        if (error) setError('');
      };

      const getWeatherIcon = (condition, rainChance) => {
        if (rainChance > 60) {
          return <i className="fas fa-cloud-showers-heavy weather-icon text-blue-400"></i>;
        } else if (rainChance > 30) {
          return <i className="fas fa-cloud-rain weather-icon text-blue-300"></i>;
        } else if (condition.includes('Sunny') || condition.includes('Clear')) {
          return <i className="fas fa-sun weather-icon text-yellow-400 sun-spin"></i>;
        } else if (condition.includes('Cloudy')) {
          return <i className="fas fa-cloud weather-icon text-gray-300 cloud-move"></i>;
        } else if (condition.includes('Storm') || condition.includes('Thunder')) {
          return <i className="fas fa-bolt weather-icon text-yellow-300"></i>;
        } else {
          return <i className="fas fa-cloud-sun weather-icon text-orange-300"></i>;
        }
      };

      const getSeason = () => {
        const month = new Date().getMonth() + 1;
        if (month >= 3 && month <= 5) return 'Spring';
        if (month >= 6 && month <= 8) return 'Summer';
        if (month >= 9 && month <= 11) return 'Autumn';
        return 'Winter';
      };

      const getIrrigationLevel = (temp, humidity, rainChance, crop, soil) => {
        let baseLevel = 50; // Medium by default
        
        // Temperature impact
        if (temp > 35) baseLevel += 30;
        else if (temp > 25) baseLevel += 15;
        else if (temp < 15) baseLevel -= 20;
        
        // Humidity impact
        if (humidity < 25) baseLevel += 20;
        else if (humidity > 60) baseLevel -= 15;
        
        // Rain chance impact
        baseLevel -= rainChance;
        
        // Crop-specific adjustments
        if (crop === 'Rice' || crop === 'Sugarcane') baseLevel += 20;
        if (crop === 'Dates' || crop === 'Olives') baseLevel -= 15;
        
        // Soil adjustments
        if (soil === 'Sandy Soil') baseLevel += 15;
        if (soil === 'Clay Soil') baseLevel -= 10;
        
        return Math.max(0, Math.min(100, baseLevel));
      };

      const getIrrigationClass = (level) => {
        if (level > 70) return 'irrigation-high';
        if (level > 40) return 'irrigation-medium';
        return 'irrigation-low';
      };

      const getIrrigationText = (level) => {
        if (level > 70) return 'High Irrigation Needed';
        if (level > 40) return 'Moderate Irrigation';
        return 'Low Irrigation';
      };

      const predictWeather = () => {
        // Validation
        if (!formData.governorate || !formData.city) {
          setError('Please select both governorate and city');
          return;
        }

        if (!formData.date) {
          setError('Please select a date for weather analysis');
          return;
        }

        const dateValidation = validateDate(formData.date);
        if (!dateValidation.valid) {
          setError(dateValidation.message);
          return;
        }

        setLoading(true);
        setProgress(0);
        const progressInterval = setInterval(() => {
          setProgress(prev => {
            if (prev >= 100) {
              clearInterval(progressInterval);
              return 100;
            }
            return prev + 10;
          });
        }, 150);
        
        // Simulate API call delay
        setTimeout(() => {
          const cityWeather = egyptData.current.weather[formData.city] || { 
            temp: 28, 
            humidity: 40, 
            condition: 'Sunny',
            rainChance: 5,
            windSpeed: 15,
            pressure: 1013
          };
          
          const forecastDays = formData.forecast_period === 'Week' ? 7 : 
                              formData.forecast_period === 'Month' ? 30 : 1;
          
          const forecast = [];
          for (let i = 0; i < forecastDays; i++) {
            const date = new Date(formData.date);
            date.setDate(date.getDate() + i);
            
            // More realistic forecast generation for Egypt
            const tempVariation = cityWeather.temp + Math.floor(Math.random() * 8) - 4;
            const humidityVariation = Math.max(10, Math.min(80, cityWeather.humidity + Math.floor(Math.random() * 20) - 10));
            const rainChanceVariation = Math.max(0, Math.min(30, cityWeather.rainChance + Math.floor(Math.random() * 20) - 10));
            
            // Conditions that make sense with temperature and rain chance for Egypt
            let condition;
            if (rainChanceVariation > 20) condition = 'Rainy';
            else if (tempVariation > 35) condition = 'Sunny';
            else if (tempVariation < 20) condition = 'Cloudy';
            else condition = ['Sunny', 'Partly Cloudy', 'Cloudy'][Math.floor(Math.random() * 3)];
            
            forecast.push({
              day: i === 0 ? 'Today' : i === 1 ? 'Tomorrow' : `Day ${i+1}`,
              date: date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }),
              temp: tempVariation,
              humidity: humidityVariation,
              condition: condition,
              rainChance: rainChanceVariation,
              windSpeed: Math.max(5, Math.min(35, cityWeather.windSpeed + Math.floor(Math.random() * 10) - 5))
            });
          }
          
          setWeatherData({
            city: formData.city,
            governorate: formData.governorate,
            date: formData.date,
            temperature: cityWeather.temp,
            humidity: cityWeather.humidity,
            condition: cityWeather.condition,
            rainChance: cityWeather.rainChance,
            windSpeed: cityWeather.windSpeed,
            pressure: cityWeather.pressure,
            forecast: forecast,
            season: getSeason()
          });
          
          setStep(2);
          setLoading(false);
          setError('');
        }, 2000);
      };

      const generateAlerts = (weatherData, formData) => {
        const alerts = [];
        const { temperature, humidity, rainChance, windSpeed } = weatherData;
        const { crop_type, soil_type } = formData;
        
        // Temperature alerts
        if (temperature > 35) {
          alerts.push({
            type: 'warning',
            message: `High temperature (${temperature}°C) may cause heat stress to ${crop_type}. Consider additional shading and irrigation.`,
            icon: 'fa-temperature-high'
          });
        } else if (temperature < 10) {
          alerts.push({
            type: 'danger',
            message: `Low temperature (${temperature}°C) may damage ${crop_type}. Consider protective measures.`,
            icon: 'fa-temperature-low'
          });
        }
        
        // Humidity alerts
        if (humidity > 70) {
          alerts.push({
            type: 'warning',
            message: `High humidity (${humidity}%) increases risk of fungal diseases. Monitor ${crop_type} closely.`,
            icon: 'fa-tint'
          });
        } else if (humidity < 20) {
          alerts.push({
            type: 'info',
            message: `Low humidity (${humidity}%) may increase water requirements for ${crop_type}.`,
            icon: 'fa-tint'
          });
        }
        
        // Rainfall alerts
        if (rainChance > 50) {
          alerts.push({
            type: 'info',
            message: `High chance of rain (${rainChance}%). Postpone pesticide application and prepare drainage.`,
            icon: 'fa-cloud-rain'
          });
        }
        
        // Wind alerts
        if (windSpeed > 25) {
          alerts.push({
            type: 'warning',
            message: `Strong winds (${windSpeed} km/h) may damage crops. Secure plants and structures.`,
            icon: 'fa-wind'
          });
        }
        
        // Soil-specific alerts
        if (soil_type === 'Sandy Soil') {
          alerts.push({
            type: 'info',
            message: 'Sandy soil detected. Consider more frequent irrigation with smaller amounts.',
            icon: 'fa-mountain'
          });
        } else if (soil_type === 'Clay Soil') {
          alerts.push({
            type: 'info',
            message: 'Clay soil detected. Monitor for waterlogging after rainfall.',
            icon: 'fa-mountain'
          });
        }
        
        return alerts;
      };

      const getAgriculturalAdvice = () => {
        if (!formData.crop_type) {
          setError('Please select crop type for agricultural recommendations');
          return;
        }

        setLoading(true);
        setProgress(0);
        const progressInterval = setInterval(() => {
          setProgress(prev => {
            if (prev >= 100) {
              clearInterval(progressInterval);
              setLoading(false);
              return 100;
            }
            return prev + 25;
          });
        }, 100);
        
        setTimeout(() => {
          let adviceData = [];
          const crop = formData.crop_type;
          const soil = formData.soil_type;
          const temp = weatherData.temperature;
          const humidity = weatherData.humidity;
          const rainChance = weatherData.rainChance;
          const windSpeed = weatherData.windSpeed;
          const season = weatherData.season;
          const farmSize = formData.farm_size;
          const irrigationType = formData.irrigation_type;
          
          // Calculate irrigation level
          const irrigationLevel = getIrrigationLevel(temp, humidity, rainChance, crop, soil);
          
          // Base agricultural advice
          adviceData.push(`Current season: ${season} - Adjust farming practices accordingly`);
          adviceData.push(`Irrigation recommendation: ${getIrrigationText(irrigationLevel)} (${irrigationLevel}%)`);
          
          // Temperature-based advice
          if (temp > 35) {
            adviceData.push('High temperatures detected - consider additional irrigation and shading for sensitive crops');
            adviceData.push('Schedule field work during cooler morning/evening hours to avoid heat stress');
            if (crop === 'Tomatoes' || crop === 'Peppers') {
              adviceData.push('High temperatures may cause blossom drop in tomatoes and peppers - maintain consistent moisture');
            }
          } else if (temp < 15) {
            adviceData.push('Cool temperatures - protect sensitive crops from potential frost damage');
            adviceData.push('Consider using row covers or cold frames for temperature-sensitive crops');
          } else {
            adviceData.push('Optimal temperature range for most crops - maintain regular irrigation schedule');
          }
          
          // Humidity-based advice
          if (humidity > 60) {
            adviceData.push('High humidity levels - monitor for fungal diseases and improve air circulation');
            adviceData.push('Consider applying preventative fungicides for susceptible crops');
            if (crop === 'Grapes') {
              adviceData.push('High humidity increases risk of powdery mildew in grapes - ensure proper vine spacing');
            }
          } else if (humidity < 25) {
            adviceData.push('Low humidity - increase irrigation frequency to prevent water stress');
            adviceData.push('Consider using mulch to reduce soil moisture evaporation');
          } else {
            adviceData.push('Moderate humidity levels - favorable for most crops');
          }
          
          // Rainfall-based advice
          if (rainChance > 50) {
            adviceData.push('High probability of rainfall - postpone pesticide application and prepare drainage');
            adviceData.push('Consider collecting rainwater for irrigation during dry periods');
            if (soil === 'Clay Soil') {
              adviceData.push('Clay soil may become waterlogged - ensure proper field drainage');
            }
          } else if (rainChance < 10) {
            adviceData.push('Low rainfall probability - ensure adequate irrigation and water conservation');
            adviceData.push('Monitor soil moisture levels closely to prevent drought stress');
          } else {
            adviceData.push('Moderate chance of rain - monitor weather updates for irrigation planning');
          }
          
          // Wind-based advice
          if (windSpeed > 20) {
            adviceData.push('Strong winds may cause physical damage to plants and increase evaporation');
            adviceData.push('Consider windbreaks for sensitive crops and young plants');
            if (crop === 'Corn') {
              adviceData.push('Strong winds during pollination may reduce corn yields');
            }
          }
          
          // Crop-specific advice
          if (crop === 'Wheat') {
            adviceData.push('Wheat: Monitor for rust diseases in current conditions');
            adviceData.push('Consider nitrogen application if in growth stage');
            if (temp > 30) adviceData.push('High temperatures may accelerate wheat maturation - monitor closely');
            if (rainChance > 40) adviceData.push('Avoid nitrogen application before expected rainfall to prevent leaching');
          } else if (crop === 'Corn') {
            adviceData.push('Corn: Ensure adequate pollination support in current temperatures');
            adviceData.push('Monitor for corn borer activity in these conditions');
            if (temp > 32) adviceData.push('High temperatures during pollination may reduce kernel set in corn');
          } else if (crop === 'Cotton') {
            adviceData.push('Cotton: Monitor boll development in current temperature range');
            adviceData.push('Check for pink bollworm activity');
            if (humidity > 65) adviceData.push('High humidity increases risk of bacterial blight in cotton');
          } else if (crop === 'Citrus (Oranges)') {
            adviceData.push('Citrus: Monitor irrigation carefully in current temperature range');
            adviceData.push('Check for citrus leafminer and scale insects');
            if (temp < 12) adviceData.push('Protect citrus from potential cold damage');
          } else if (crop === 'Dates') {
            adviceData.push('Dates: Ensure proper pollination in current conditions');
            adviceData.push('Monitor for red palm weevil activity');
            adviceData.push('Dates are drought-tolerant but require adequate water during fruit development');
          } else if (crop === 'Tomatoes') {
            adviceData.push('Tomatoes: Maintain consistent soil moisture to prevent blossom end rot');
            adviceData.push('Monitor for early blight in current conditions');
            if (humidity > 70) adviceData.push('High humidity increases risk of fungal diseases in tomatoes');
          } else if (crop === 'Rice') {
            adviceData.push('Rice: Maintain proper water level in paddies');
            adviceData.push('Monitor for rice blast disease in current conditions');
            adviceData.push('Rice requires consistent water supply - ensure irrigation availability');
          }
          
          // Soil-specific advice
          if (soil) {
            if (soil === 'Sandy Soil') {
              adviceData.push('Sandy soil detected - increase irrigation frequency but reduce volume per session');
              adviceData.push('Consider adding organic matter to improve water retention');
              adviceData.push('Sandy soils warm quickly - may allow for earlier planting in spring');
            } else if (soil === 'Clay Soil') {
              adviceData.push('Clay soil detected - reduce irrigation frequency but increase volume per session');
              adviceData.push('Monitor for waterlogging after rainfall');
              adviceData.push('Clay soils hold nutrients well but may require aeration');
            } else if (soil === 'Loamy Soil') {
              adviceData.push('Loamy soil - optimal for most crops, maintain regular irrigation schedule');
            } else if (soil === 'Silty Soil') {
              adviceData.push('Silty soil - good water retention, monitor for compaction');
            }
          }
          
          // Farm size considerations
          if (farmSize) {
            if (farmSize.includes('Small')) {
              adviceData.push('Small farm detected - consider intensive cultivation techniques');
              adviceData.push('Manual weeding may be more practical than chemical control');
            } else if (farmSize.includes('Large') || farmSize.includes('Very Large')) {
              adviceData.push('Large-scale operation - prioritize efficient water and resource management');
              adviceData.push('Consider precision agriculture technologies for optimal resource use');
            }
          }
          
          // Irrigation type considerations
          if (irrigationType) {
            if (irrigationType === 'Drip Irrigation') {
              adviceData.push('Drip irrigation system - efficient for water conservation in current conditions');
              adviceData.push('Monitor emitters for clogging and ensure uniform water distribution');
            } else if (irrigationType === 'Surface Irrigation') {
              adviceData.push('Surface irrigation - may have higher water loss through evaporation');
              adviceData.push('Consider scheduling irrigation during cooler hours to reduce evaporation');
            } else if (irrigationType === 'Sprinkler Irrigation') {
              adviceData.push('Sprinkler irrigation - avoid during windy conditions to ensure even coverage');
              if (windSpeed > 15) adviceData.push('High winds may reduce sprinkler efficiency - consider alternative timing');
            }
          }
          
          // Seasonal advice
          if (season === 'Summer') {
            adviceData.push('Summer season: Increase irrigation frequency, especially for water-intensive crops');
            adviceData.push('Monitor for heat stress in sensitive crops');
            adviceData.push('Consider shade structures for high-value crops during peak heat');
          } else if (season === 'Winter') {
            adviceData.push('Winter season: Reduce irrigation frequency, protect crops from potential frost');
            adviceData.push('Consider planting cold-tolerant varieties');
            adviceData.push('Monitor for frost warnings and prepare protective measures');
          } else if (season === 'Spring') {
            adviceData.push('Spring season: Ideal planting time for most crops, monitor for sudden temperature changes');
            adviceData.push('Prepare fields for planting as soil temperatures rise');
            adviceData.push('Monitor for early-season pests as temperatures increase');
          } else if (season === 'Autumn') {
            adviceData.push('Autumn season: Prepare for harvest, reduce irrigation as crops mature');
            adviceData.push('Monitor for late-season diseases as humidity patterns change');
            adviceData.push('Plan for post-harvest field management and cover cropping');
          }
          
          // Water conservation advice
          if (irrigationLevel > 60) {
            adviceData.push('High irrigation needs - consider water conservation measures');
            adviceData.push('Mulching can significantly reduce evaporation and water requirements');
            if (farmSize && (farmSize.includes('Large') || farmSize.includes('Very Large'))) {
              adviceData.push('Large farms with high water needs should consider modern irrigation scheduling technologies');
            }
          }
          
          // Generate alerts based on conditions
          const generatedAlerts = generateAlerts(weatherData, formData);
          setAlerts(generatedAlerts);
          
          setAdvice(adviceData);
          setStep(3);
        }, 1500);
      };

      const Header = () => (
        <header className="py-5 px-6 header-gradient sticky top-0 z-50">
          <div className="container mx-auto flex justify-between items-center">
            <div className="flex items-center space-x-2">
              <div className="app-logo">
                {/* Replace this with your image */}
                <img src="https://via.placeholder.com/150x50?text=Your+Logo" alt="Agricultural Intelligence Logo" className="app-logo-image" />
                <span className="app-logo-text">AGRICULTURAL INTELLIGENCE</span>
                <span className="app-badge">WEATHER SYSTEM</span>
              </div>
            </div>
            
            <div className="flex items-center space-x-4">
              <div className="flex space-x-2">
                <div 
                  className={`nav-link ${currentPage === 'home' ? 'active' : ''}`}
                  onClick={() => setCurrentPage('home')}
                >
                  <i className="fas fa-home mr-2"></i>
                  Home
                </div>
                <div 
                  className={`nav-link ${currentPage === 'about' ? 'active' : ''}`}
                  onClick={() => setCurrentPage('about')}
                >
                  <i className="fas fa-info-circle mr-2"></i>
                  About Us
                </div>
                <div 
                  className={`nav-link ${currentPage === 'crops' ? 'active' : ''}`}
                  onClick={() => setCurrentPage('crops')}
                >
                  <i className="fas fa-seedling mr-2"></i>
                  Crop Guide
                </div>
                <div 
                  className={`nav-link ${currentPage === 'dashboard' ? 'active' : ''}`}
                  onClick={() => setCurrentPage('dashboard')}
                >
                  <i className="fas fa-chart-bar mr-2"></i>
                  Dashboard
                </div>
              </div>
              
              <div className="text-white text-sm hidden md:block">
                <div className="flex items-center space-x-2">
                  <i className="fas fa-clock text-green-400"></i>
                  <span className="font-mono">{currentTime.toLocaleTimeString('en-US')}</span>
                </div>
                <div className="text-gray-400 text-xs">
                  {currentTime.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                  })}
                </div>
              </div>
            </div>
          </div>
        </header>
      );

      const LoadingScreen = ({ message = "Initializing Agricultural Intelligence Systems" }) => (
        <div className="min-h-screen flex flex-col items-center justify-center">
          <div className="text-center text-white">
            <div className="loading-dots mb-6">
              <div></div>
              <div></div>
              <div></div>
              <div></div>
            </div>
            <h2 className="text-2xl font-bold mb-2">{message}</h2>
            <p className="text-gray-400">Processing satellite meteorological data...</p>
            <div className="progress-bar mt-6 w-64 mx-auto">
              <div className="progress-fill" style={{ width: `${progress}%` }}></div>
            </div>
            <p className="text-sm text-gray-500 mt-3">{progress}% Complete</p>
          </div>
        </div>
      );

      const WeatherRadar = ({ city, rainChance }) => {
        const dots = [];
        const dotCount = Math.min(15, Math.floor(rainChance / 7));
        
        for (let i = 0; i < dotCount; i++) {
          const angle = Math.random() * 360;
          const distance = 20 + Math.random() * 70;
          const x = 50 + Math.cos(angle * Math.PI / 180) * distance;
          const y = 50 + Math.sin(angle * Math.PI / 180) * distance;
          const size = 5 + Math.random() * 10;
          const opacity = 0.3 + Math.random() * 0.7;
          
          dots.push(
            <div 
              key={i}
              className="radar-dot"
              style={{
                left: `${x}%`,
                top: `${y}%`,
                width: `${size}px`,
                height: `${size}px`,
                opacity: opacity,
                animationDelay: `${Math.random() * 2}s`
              }}
            ></div>
          );
        }
        
        return (
          <div className="weather-radar mt-6">
            <div className="radar-sweep"></div>
            {dots}
            <div className="absolute bottom-3 left-3 text-xs text-gray-400">
              Precipitation Radar: {city}
            </div>
            <div className="absolute top-3 right-3 text-xs text-blue-400 font-semibold">
              Intensity: {rainChance}%
            </div>
          </div>
        );
      };

      const DashboardPage = () => (
        <div className="container mx-auto px-4 py-8 fade-in">
          <div className="max-w-6xl mx-auto">
            <div className="card p-8 rounded-2xl slide-up mb-8">
              <div className="text-center mb-10">
                <h1 className="text-4xl font-bold text-white mb-4">
                  <i className="fas fa-chart-bar mr-3 text-green-500"></i>
                  Agricultural Dashboard
                </h1>
                <p className="text-gray-300 text-lg">Comprehensive overview of agricultural conditions</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10">
                <div className="stat-card">
                  <i className="fas fa-tint text-blue-400 text-3xl"></i>
                  <div className="stat-value">{nileLevel}%</div>
                  <div className="stat-label">Water Level</div>
                  <div className="nile-level mt-2">
                    <div className="nile-level-fill" style={{ width: `${nileLevel}%` }}></div>
                    <div className="nile-level-text">{nileLevel}%</div>
                  </div>
                </div>
                
                <div className="stat-card">
                  <i className="fas fa-temperature-high text-red-400 text-3xl"></i>
                  <div className="stat-value">28°C</div>
                  <div className="stat-label">Average Temperature</div>
                  <div className="text-sm text-gray-400 mt-2">Optimal for most crops</div>
                </div>
                
                <div className="stat-card">
                  <i className="fas fa-cloud-rain text-blue-300 text-3xl"></i>
                  <div className="stat-value">12%</div>
                  <div className="stat-label">Rain Probability</div>
                  <div className="text-sm text-gray-400 mt-2">Low rainfall expected</div>
                </div>
                
                <div className="stat-card">
                  <i className="fas fa-wind text-green-400 text-3xl"></i>
                  <div className="stat-value">15 km/h</div>
                  <div className="stat-label">Average Wind Speed</div>
                  <div className="text-sm text-gray-400 mt-2">Moderate conditions</div>
                </div>
              </div>

              <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10">
                <div className="card p-6">
                  <h3 className="text-xl font-bold text-white mb-6">Crop Market Prices</h3>
                  <div className="space-y-4">
                    {Object.entries(marketPrices).slice(0, 8).map(([crop, data]) => (
                      <div key={crop} className="flex justify-between items-center py-2 border-b border-gray-700">
                        <span className="text-gray-300">{crop}</span>
                        <div className="text-right">
                          <div className="font-bold text-white">{data.price} EGP {data.unit}</div>
                          <div className={`text-sm ${data.change > 0 ? 'price-up' : data.change < 0 ? 'price-down' : 'price-stable'}`}>
                            {data.change > 0 ? '+' : ''}{data.change}%
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
                
                <div className="card p-6">
                  <h3 className="text-xl font-bold text-white mb-6">Regional Conditions</h3>
                  <div className="space-y-4">
                    <div className="flex justify-between items-center py-2 border-b border-gray-700">
                      <span className="text-gray-300">Nile Delta</span>
                      <span className="text-green-400 font-medium">Optimal</span>
                    </div>
                    <div className="flex justify-between items-center py-2 border-b border-gray-700">
                      <span className="text-gray-300">Upper Egypt</span>
                      <span className="text-yellow-400 font-medium">Moderate</span>
                    </div>
                    <div className="flex justify-between items-center py-2 border-b border-gray-700">
                      <span className="text-gray-300">Western Desert</span>
                      <span className="text-red-400 font-medium">Challenging</span>
                    </div>
                    <div className="flex justify-between items-center py-2 border-b border-gray-700">
                      <span className="text-gray-300">Sinai Peninsula</span>
                      <span className="text-yellow-400 font-medium">Moderate</span>
                    </div>
                    <div className="flex justify-between items-center py-2">
                      <span className="text-gray-300">Red Sea Coast</span>
                      <span className="text-green-400 font-medium">Good</span>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-gradient-to-r from-green-900/30 to-green-800/20 p-8 rounded-2xl border border-green-700/30">
                <h3 className="text-2xl font-semibold mb-6 text-white">Seasonal Agricultural Calendar</h3>
                <div className="overflow-x-auto">
                  <table className="w-full text-base text-center">
                    <thead className="bg-green-800/50">
                      <tr>
                        <th className="p-4">Season</th>
                        <th className="p-4">Months</th>
                        <th className="p-4">Primary Crops</th>
                        <th className="p-4">Key Activities</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr className="border-b border-green-800/30 hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Winter</td>
                        <td className="p-4">Nov - Feb</td>
                        <td className="p-4">Wheat, Beans, Lentils, Barley</td>
                        <td className="p-4">Planting, Irrigation, Pest Control</td>
                      </tr>
                      <tr className="border-b border-green-800/30 hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Spring</td>
                        <td className="p-4">Mar - Apr</td>
                        <td className="p-4">Cotton, Corn, Sunflower</td>
                        <td className="p-4">Planting, Fertilization</td>
                      </tr>
                      <tr className="border-b border-green-800/30 hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Summer</td>
                        <td className="p-4">May - Aug</td>
                        <td className="p-4">Rice, Sugarcane, Corn</td>
                        <td className="p-4">Irrigation, Harvesting</td>
                      </tr>
                      <tr className="hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Autumn</td>
                        <td className="p-4">Sep - Oct</td>
                        <td className="p-4">Dates, Citrus, Grapes</td>
                        <td className="p-4">Harvesting, Pruning</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            
            <button
              className="w-full bg-gray-700 hover:bg-gray-600 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
              onClick={() => setCurrentPage('home')}
            >
              <i className="fas fa-arrow-left mr-3"></i>
              Back to Home
            </button>
          </div>
        </div>
      );

      const CropGuidePage = () => (
        <div className="container mx-auto px-4 py-8 fade-in">
          <div className="max-w-6xl mx-auto">
            <div className="card p-8 rounded-2xl slide-up mb-8">
              <div className="text-center mb-10">
                <h1 className="text-4xl font-bold text-white mb-4">
                  <i className="fas fa-seedling mr-3 text-green-500"></i>
                  Crop Guide
                </h1>
                <p className="text-gray-300 text-lg">Comprehensive information about major crops cultivated in the region</p>
              </div>

              <div className="grid grid-cols-1 md:grid-2 lg:grid-cols-3 gap-6 mb-10">
                {egyptData.current.crops.map((crop, index) => (
                  <div key={index} className="crop-card">
                    <div className="agriculture-icon">
                      <i className="fas fa-seedling"></i>
                    </div>
                    <h3 className="text-xl font-bold text-white mb-3">{crop}</h3>
                    <div className="mb-4">
                      <div className="flex justify-between text-sm mb-1">
                        <span className="text-gray-400">Water Needs</span>
                        <span className="text-white font-medium">
                          {crop === 'Rice' || crop === 'Sugarcane' ? 'High' : 
                           crop === 'Cotton' || crop === 'Corn' ? 'Medium-High' :
                           crop === 'Wheat' || crop === 'Tomatoes' ? 'Medium' : 'Low'}
                        </span>
                      </div>
                      <div className="soil-moisture-bar">
                        <div 
                          className="soil-moisture-fill" 
                          style={{ 
                            width: `${crop === 'Rice' || crop === 'Sugarcane' ? '90%' : 
                                    crop === 'Cotton' || crop === 'Corn' ? '70%' :
                                    crop === 'Wheat' || crop === 'Tomatoes' ? '50%' : '30%'}` 
                          }}
                        ></div>
                      </div>
                    </div>
                    
                    <div className="mb-4">
                      <div className="flex justify-between text-sm mb-1">
                        <span className="text-gray-400">Optimal Temperature</span>
                        <span className="text-white font-medium">
                          {crop === 'Dates' ? '25-35°C' : 
                           crop === 'Wheat' ? '15-25°C' :
                           crop === 'Cotton' ? '20-30°C' : '18-28°C'}
                        </span>
                      </div>
                    </div>
                    
                    <div className="mb-4">
                      <div className="flex justify-between text-sm mb-1">
                        <span className="text-gray-400">Growing Season</span>
                        <span className="text-white font-medium">
                          {crop === 'Wheat' ? 'Winter' : 
                           crop === 'Corn' ? 'Summer' :
                           crop === 'Cotton' ? 'Spring-Summer' : 'Varies'}
                        </span>
                      </div>
                    </div>
                    
                    <div className="text-sm text-gray-300">
                      {crop === 'Wheat' && 'Primary winter crop, mainly grown in Nile Delta region.'}
                      {crop === 'Corn' && 'Summer crop, important for both human consumption and animal feed.'}
                      {crop === 'Rice' && 'High water requirement crop, primarily cultivated in northern Delta.'}
                      {crop === 'Cotton' && 'World-renowned for its long staple fibers.'}
                      {crop === 'Sugarcane' && 'Grown in Upper Egypt, primarily in Qena and Aswan governorates.'}
                      {crop === 'Citrus (Oranges)' && 'Major export crop, grown in Nile Delta and some desert areas.'}
                      {crop === 'Dates' && 'Traditional crop, one of the world\'s largest date producers.'}
                      {!['Wheat', 'Corn', 'Rice', 'Cotton', 'Sugarcane', 'Citrus (Oranges)', 'Dates'].includes(crop) && 
                        'Important agricultural product with varying cultivation requirements across the region.'}
                    </div>
                  </div>
                ))}
              </div>

              <div className="bg-gradient-to-r from-green-900/30 to-green-800/20 p-8 rounded-2xl border border-green-700/30">
                <h3 className="text-2xl font-semibold mb-6 text-white">Agricultural Calendar</h3>
                <div className="overflow-x-auto">
                  <table className="w-full text-base text-center">
                    <thead className="bg-green-800/50">
                      <tr>
                        <th className="p-4">Season</th>
                        <th className="p-4">Months</th>
                        <th className="p-4">Primary Crops</th>
                        <th className="p-4">Agricultural Activities</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr className="border-b border-green-800/30 hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Winter</td>
                        <td className="p-4">Nov - Feb</td>
                        <td className="p-4">Wheat, Beans, Lentils, Barley</td>
                        <td className="p-4">Planting, Irrigation, Pest Control</td>
                      </tr>
                      <tr className="border-b border-green-800/30 hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Spring</td>
                        <td className="p-4">Mar - Apr</td>
                        <td className="p-4">Cotton, Corn, Sunflower</td>
                        <td className="p-4">Planting, Fertilization</td>
                      </tr>
                      <tr className="border-b border-green-800/30 hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Summer</td>
                        <td className="p-4">May - Aug</td>
                        <td className="p-4">Rice, Sugarcane, Corn</td>
                        <td className="p-4">Irrigation, Harvesting</td>
                      </tr>
                      <tr className="hover:bg-green-900/20 transition-all">
                        <td className="p-4 font-medium">Autumn</td>
                        <td className="p-4">Sep - Oct</td>
                        <td className="p-4">Dates, Citrus, Grapes</td>
                        <td className="p-4">Harvesting, Pruning</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            
            <button
              className="w-full bg-gray-700 hover:bg-gray-600 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
              onClick={() => setCurrentPage('home')}
            >
              <i className="fas fa-arrow-left mr-3"></i>
              Back to Home
            </button>
          </div>
        </div>
      );

      const AboutPage = () => (
        <div className="container mx-auto px-4 py-8 fade-in">
          <div className="max-w-6xl mx-auto">
            <div className="card p-8 rounded-2xl slide-up mb-8">
              <div className="text-center mb-10">
                <h1 className="text-4xl font-bold text-white mb-4">
                  <i className="fas fa-info-circle mr-3 text-blue-500"></i>
                  About Agricultural Intelligence
                </h1>
                <p className="text-gray-300 text-lg">Revolutionizing agriculture through advanced satellite technology and AI</p>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                <div className="data-card">
                  <i className="fas fa-tractor text-green-400 text-3xl mb-4"></i>
                  <h3 className="text-xl font-bold text-white mb-3">Our Mission</h3>
                  <p className="text-gray-300">
                    To provide farmers with the most accurate, timely, and actionable agricultural intelligence 
                    using cutting-edge satellite technology, advanced meteorological modeling, and machine learning algorithms.
                  </p>
                </div>
                
                <div className="data-card">
                  <i className="fas fa-leaf text-green-400 text-3xl mb-4"></i>
                  <h3 className="text-xl font-bold text-white mb-3">Regional Focus</h3>
                  <p className="text-gray-300">
                    Our system is specifically designed for the region's unique climate, crops, and agricultural challenges, 
                    from the Nile Delta to the desert oases.
                  </p>
                </div>
              </div>

              <div className="mb-10">
                <h3 className="text-2xl font-semibold mb-6 text-white">Our Technology</h3>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <div className="bg-gradient-to-br from-blue-800 to-purple-900 p-6 rounded-2xl">
                    <i className="fas fa-satellite-dish text-4xl mb-4 text-blue-300"></i>
                    <h4 className="text-lg font-bold text-white mb-2">Satellite Network</h4>
                    <p className="text-gray-300 text-sm">
                      Advanced Earth observation satellites providing real-time data on weather, soil moisture, and crop health.
                    </p>
                  </div>
                  
                  <div className="bg-gradient-to-br from-green-800 to-blue-900 p-6 rounded-2xl">
                    <i className="fas fa-brain text-4xl mb-4 text-green-300"></i>
                    <h4 className="text-lg font-bold text-white mb-2">AI Analysis</h4>
                    <p className="text-gray-300 text-sm">
                      Machine learning algorithms that process data to provide personalized agricultural recommendations.
                    </p>
                  </div>
                  
                  <div className="bg-gradient-to-br from-purple-800 to-pink-900 p-6 rounded-2xl">
                    <i className="fas fa-chart-line text-4xl mb-4 text-purple-300"></i>
                    <h4 className="text-lg font-bold text-white mb-2">Crop Modeling</h4>
                    <p className="text-gray-300 text-sm">
                      Sophisticated crop models that simulate growth under regional climate conditions with high accuracy.
                    </p>
                  </div>
                </div>
              </div>

              <div className="bg-gradient-to-r from-blue-900/30 to-blue-800/20 p-8 rounded-2xl border border-blue-700/30 mb-8">
                <h3 className="text-2xl font-semibold mb-6 text-white">Our Team</h3>
                <p className="text-gray-300 mb-6">
                  Agricultural Intelligence is developed by <span className="font-bold text-blue-400">iNFINITY MISSION</span>, 
                  a multidisciplinary team of agricultural scientists, meteorologists, data scientists, and engineers 
                  dedicated to advancing agriculture through technology.
                </p>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  {teamMembers.map((member, index) => (
                    <div 
                      key={index} 
                      className={`team-member card p-6 rounded-2xl text-center ${member.isLeader ? 'team-leader' : ''}`}
                    >
                      <div className="w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-blue-600 to-purple-700 rounded-full flex items-center justify-center">
                        <i className="fas fa-user-astronaut text-white text-2xl"></i>
                      </div>
                      <h4 className="font-bold text-white text-lg">{member.name}</h4>
                      <p className="text-gray-400">{member.role}</p>
                      {member.isLeader && (
                        <div className="mt-2">
                          <span className="inline-block bg-red-600 text-white text-xs px-2 py-1 rounded-full">
                            Team Leader
                          </span>
                        </div>
                      )}
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-gradient-to-r from-green-900/30 to-green-800/20 p-8 rounded-2xl border border-green-700/30">
                <h3 className="text-2xl font-semibold mb-6 text-white">Our Vision</h3>
                <p className="text-gray-300 mb-4">
                  We envision a future where every farmer has access to precise weather forecasts and agricultural 
                  recommendations, enabling better crop yields, efficient water usage, and sustainable farming practices 
                  that honor agricultural heritage while embracing modern technology.
                </p>
                <div className="flex items-center justify-center mt-6">
                  <div className="bg-gradient-to-r from-green-600 to-green-700 text-white py-3 px-6 rounded-full font-bold text-lg">
                    iNFINITY MISSION
                  </div>
                </div>
              </div>
            </div>
            
            <button
              className="w-full bg-gray-700 hover:bg-gray-600 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
              onClick={() => setCurrentPage('home')}
            >
              <i className="fas fa-arrow-left mr-3"></i>
              Back to Home
            </button>
          </div>
        </div>
      );

      const renderStep1 = () => (
        <div className="container mx-auto px-4 py-8 fade-in">
          <div className="max-w-4xl mx-auto card p-8 rounded-2xl slide-up">
            <div className="text-center mb-10">
              <h1 className="text-4xl font-bold text-white mb-4 typing-animation">
                <i className="fas fa-tractor mr-3 text-green-500"></i>
                Agricultural Weather Intelligence
              </h1>
              <p className="text-gray-300 text-lg">Advanced meteorological analysis for agriculture powered by satellite data</p>
            </div>
          
            {error && (
              <div className="bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg mb-6 flex items-center">
                <i className="fas fa-exclamation-circle mr-3"></i>
                <span>{error}</span>
              </div>
            )}

            <div className="space-y-6">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">
                    <i className="fas fa-map-marked-alt mr-2 text-blue-400"></i>
                    Select Governorate
                  </label>
                  <select 
                    className="form-select"
                    value={formData.governorate}
                    onChange={handleGovernorateChange}
                  >
                    <option value="">Choose a governorate</option>
                    {governorates.map(governorate => (
                      <option key={governorate} value={governorate}>{governorate}</option>
                    ))}
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">
                    <i className="fas fa-city mr-2 text-blue-400"></i>
                    Select City
                  </label>
                  <select 
                    className="form-select"
                    name="city"
                    value={formData.city}
                    onChange={handleChange}
                    disabled={!formData.governorate || loading}
                  >
                    <option value="">{formData.governorate ? "Choose a city" : "Select governorate first"}</option>
                    {cities.map(city => (
                      <option key={city} value={city}>{city}</option>
                    ))}
                  </select>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">
                    <i className="fas fa-calendar-alt mr-2 text-blue-400"></i>
                    Analysis Date
                  </label>
                  <input 
                    type="date"
                    className="form-input"
                    name="date"
                    value={formData.date}
                    onChange={handleChange}
                    min={new Date().toISOString().split('T')[0]}
                    max={new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toISOString().split('T')[0]}
                  />
                </div>
                
                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">
                    <i className="fas fa-chart-line mr-2 text-blue-400"></i>
                    Forecast Period
                  </label>
                  <select 
                    className="form-select"
                    name="forecast_period"
                    value={formData.forecast_period}
                    onChange={handleChange}
                  >
                    <option value="1 day">24-Hour Forecast</option>
                    <option value="Week">7-Day Extended Forecast</option>
                    <option value="Month">30-Day Climate Outlook</option>
                  </select>
                </div>
              </div>

              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">
                    <i className="fas fa-seedling mr-2 text-green-400"></i>
                    Crop Type
                  </label>
                  <select 
                    className="form-select"
                    name="crop_type"
                    value={formData.crop_type}
                    onChange={handleChange}
                  >
                    <option value="">Select crop type</option>
                    {egyptData.current.crops.map(crop => (
                      <option key={crop} value={crop}>{crop}</option>
                    ))}
                  </select>
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-300 mb-2">
                    <i className="fas fa-mountain mr-2 text-yellow-400"></i>
                    Soil Type (Optional)
                  </label>
                  <select 
                    className="form-select"
                    name="soil_type"
                    value={formData.soil_type}
                    onChange={handleChange}
                  >
                    <option value="">Select soil type</option>
                    {egyptData.current.soilTypes.map(soil => (
                      <option key={soil} value={soil}>{soil}</option>
                    ))}
                  </select>
                </div>
              </div>

              <button
                className="w-full btn-primary btn-agriculture py-4 text-lg pulse mt-4"
                onClick={predictWeather}
                disabled={loading || !formData.governorate || !formData.city || !formData.date || !formData.crop_type}
              >
                {loading ? (
                  <>
                    <i className="fas fa-spinner fa-spin mr-2"></i>
                    Analyzing Agricultural Weather Data...
                  </>
                ) : (
                  <>
                    <i className="fas fa-satellite-dish mr-2"></i>
                    Generate Agricultural Weather Analysis
                  </>
                )}
              </button>
            </div>
            
            <div className="mt-10 pt-8 border-t border-gray-700">
              <h3 className="text-xl font-semibold text-white mb-6 flex items-center">
                <i className="fas fa-info-circle mr-3 text-blue-400"></i>
                Agricultural Intelligence
              </h3>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div className="data-card">
                  <i className="fas fa-satellite-dish text-blue-400 text-2xl mb-3"></i>
                  <p className="text-sm text-gray-300">Satellite Coverage</p>
                  <p className="font-bold text-white">All Regional Areas</p>
                  <p className="text-xs text-gray-500 mt-2">Real-time data from Earth observation satellites</p>
                </div>
                <div className="data-card">
                  <i className="fas fa-tint text-green-400 text-2xl mb-3"></i>
                  <p className="text-sm text-gray-300">Water Management</p>
                  <p className="font-bold text-white">River Monitoring</p>
                  <p className="text-xs text-gray-500 mt-2">Optimized irrigation recommendations for regional crops</p>
                </div>
                <div className="data-card">
                  <i className="fas fa-seedling text-yellow-400 text-2xl mb-3"></i>
                  <p className="text-sm text-gray-300">Crop Specific</p>
                  <p className="font-bold text-white">Regional Crop Database</p>
                  <p className="text-xs text-gray-500 mt-2">Tailored advice for major agricultural products</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      );

      const renderStep2 = () => (
        <div className="container mx-auto px-4 py-8 fade-in">
          <div className="max-w-6xl mx-auto">
            <div className="card p-8 rounded-2xl mb-8 slide-up">
              <h1 className="text-3xl font-bold text-center mb-2 text-white">
                <i className="fas fa-map-marker-alt mr-3 text-red-400"></i>
                Agricultural Weather Analysis: {weatherData.city}, {weatherData.governorate}
              </h1>
              <p className="text-gray-400 text-center mb-8">Comprehensive weather assessment for {formData.crop_type} cultivation</p>

              <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-10">
                <div className={`lg:col-span-2 bg-gradient-to-br from-blue-800 to-purple-900 p-6 rounded-2xl text-white ${weatherData.rainChance > 50 ? 'rain-animation' : ''}`}>
                  <div className="flex justify-between items-center mb-6">
                    <div>
                      <div className="text-5xl font-bold">{weatherData.temperature}°C</div>
                      <div className="text-2xl mt-2">{weatherData.condition}</div>
                      <div className="text-gray-300 mt-1 flex items-center">
                        <span className={`season-indicator season-${weatherData.season.toLowerCase()} mr-3`}>
                          {weatherData.season} Season
                        </span>
                        Feels like {weatherData.temperature + 2}°C
                      </div>
                    </div>
                    <div className="text-6xl">
                      {getWeatherIcon(weatherData.condition, weatherData.rainChance)}
                    </div>
                  </div>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
                    <div className="bg-white/10 p-4 rounded-lg text-center tooltip" data-tooltip="Relative Humidity Level">
                      <i className="fas fa-tint text-blue-300 text-xl mb-2"></i>
                      <div className="text-sm text-gray-300">Humidity</div>
                      <div className="font-bold text-white text-lg">{weatherData.humidity}%</div>
                    </div>
                    <div className="bg-white/10 p-4 rounded-lg text-center tooltip" data-tooltip="Probability of Precipitation">
                      <i className="fas fa-cloud-rain text-blue-300 text-xl mb-2"></i>
                      <div className="text-sm text-gray-300">Rain Chance</div>
                      <div className="font-bold text-white text-lg">{weatherData.rainChance}%</div>
                    </div>
                    <div className="bg-white/10 p-4 rounded-lg text-center tooltip" data-tooltip="Wind Speed at 10m height">
                      <i className="fas fa-wind text-blue-300 text-xl mb-2"></i>
                      <div className="text-sm text-gray-300">Wind Speed</div>
                      <div className="font-bold text-white text-lg">{weatherData.windSpeed} km/h</div>
                    </div>
                    <div className="bg-white/10 p-4 rounded-lg text-center tooltip" data-tooltip="Atmospheric Pressure at Sea Level">
                      <i className="fas fa-tachometer-alt text-blue-300 text-xl mb-2"></i>
                      <div className="text-sm text-gray-300">Pressure</div>
                      <div className="font-bold text-white text-lg">{weatherData.pressure} hPa</div>
                    </div>
                  </div>
                  
                  <WeatherRadar city={weatherData.city} rainChance={weatherData.rainChance} />
                </div>

                <div className="card p-6 rounded-2xl">
                  <h3 className="font-semibold text-xl mb-6 text-white flex items-center">
                    <i className="fas fa-info-circle mr-3 text-blue-400"></i>
                    Agricultural Analysis
                  </h3>
                  <div className="space-y-4">
                    <div className="flex justify-between py-3 border-b border-gray-700">
                      <span className="text-gray-300">Target Date</span>
                      <span className="font-medium text-white">{new Date(weatherData.date).toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span>
                    </div>
                    <div className="flex justify-between py-3 border-b border-gray-700">
                      <span className="text-gray-300">Crop Type</span>
                      <span className="font-medium text-white">{formData.crop_type}</span>
                    </div>
                    <div className="flex justify-between py-3 border-b border-gray-700">
                      <span className="text-gray-300">Soil Type</span>
                      <span className="font-medium text-white">{formData.soil_type || 'Not specified'}</span>
                    </div>
                    <div className="flex justify-between py-3 border-b border-gray-700">
                      <span className="text-gray-300">Season</span>
                      <span className="font-medium text-white">{weatherData.season}</span>
                    </div>
                    <div className="flex justify-between py-3">
                      <span className="text-gray-300">Last Update</span>
                      <span className="font-medium text-white">{currentTime.toLocaleTimeString('en-US')}</span>
                    </div>
                  </div>
                  
                  <div className="mt-8">
                    <h4 className="font-semibold text-lg mb-4 text-white">Agricultural Summary</h4>
                    <p className="text-gray-300 text-sm">
                      {weatherData.rainChance > 30 
                        ? `Rain expected (${weatherData.rainChance}%) - consider postponing pesticide application and prepare field drainage.`
                        : weatherData.temperature > 35
                        ? `High temperatures (${weatherData.temperature}°C) - increase irrigation frequency for ${formData.crop_type}.`
                        : `Favorable conditions for ${formData.crop_type} cultivation with temperatures around ${weatherData.temperature}°C.`
                      }
                    </p>
                  </div>
                </div>
              </div>

              <div className="mb-10">
                <h3 className="text-2xl font-semibold mb-6 text-white flex items-center">
                  <i className="fas fa-chart-bar mr-3 text-blue-400"></i>
                  Extended Forecast: {formData.forecast_period === '1 day' ? '24-Hour' : formData.forecast_period === 'Week' ? '7-Day' : '30-Day'} Outlook
                </h3>
                <div className="forecast-grid">
                  {weatherData.forecast.slice(0, formData.forecast_period === 'Month' ? 30 : 
                                              formData.forecast_period === 'Week' ? 7 : 1).map((day, index) => (
                    <div key={index} className="card p-4 rounded-xl text-center transition-all hover:shadow-lg hover:bg-gray-800/70">
                      <div className="font-medium text-sm mb-1">{day.day}</div>
                      <div className="text-xs text-gray-400 mb-3">{day.date}</div>
                      <div className="my-3 text-3xl">
                        {getWeatherIcon(day.condition, day.rainChance)}
                      </div>
                      <div className="font-bold text-xl">{day.temp}°C</div>
                      <div className="text-xs text-blue-400 mt-2">{day.rainChance}% precipitation</div>
                      <div className="text-xs text-gray-500 mt-1">{day.windSpeed} km/h wind</div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-gradient-to-r from-green-900/30 to-green-800/20 p-8 rounded-2xl border border-green-700/30">
                <h3 className="font-semibold text-2xl mb-6 text-white flex items-center">
                  <i className="fas fa-tractor mr-3 text-green-400"></i>
                  Agricultural Recommendations
                </h3>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                  <div>
                    <label className="block text-lg font-medium text-gray-300 mb-4">
                      <i className="fas fa-expand-arrows-alt mr-3 text-blue-400"></i>
                      Farm Size
                    </label>
                    <select 
                      className="form-select text-lg py-3"
                      value={formData.farm_size}
                      onChange={(e) => setFormData({...formData, farm_size: e.target.value})}
                    >
                      <option value="">Select farm size...</option>
                      {egyptData.current.farmSizes.map(size => (
                        <option key={size} value={size}>{size}</option>
                      ))}
                    </select>
                  </div>
                  
                  <div>
                    <label className="block text-lg font-medium text-gray-300 mb-4">
                      <i className="fas fa-tint mr-3 text-blue-400"></i>
                      Irrigation Type
                    </label>
                    <select 
                      className="form-select text-lg py-3"
                      value={formData.irrigation_type}
                      onChange={(e) => setFormData({...formData, irrigation_type: e.target.value})}
                    >
                      <option value="">Select irrigation type...</option>
                      {egyptData.current.irrigationTypes.map(type => (
                        <option key={type} value={type}>{type}</option>
                      ))}
                    </select>
                  </div>
                </div>
                
                <button
                  className="w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
                  onClick={getAgriculturalAdvice}
                  disabled={loading || !formData.crop_type}
                >
                  {loading ? (
                    <>
                      <i className="fas fa-spinner fa-spin mr-3"></i>
                      Generating Agricultural Recommendations...
                    </>
                  ) : (
                    <>
                      <i className="fas fa-seedling mr-3"></i>
                      Get Personalized Agricultural Recommendations
                    </>
                  )}
                </button>
              </div>
            </div>

            <button
              className="w-full bg-gray-700 hover:bg-gray-600 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
              onClick={() => setStep(1)}
            >
              <i className="fas fa-arrow-left mr-3"></i>
              Back to Analysis Dashboard
            </button>
          </div>
        </div>
      );

      const renderStep3 = () => (
        <div className="container mx-auto px-4 py-8 fade-in">
          <div className="max-w-6xl mx-auto">
            <div className="card p-8 rounded-2xl slide-up">
              <h1 className="text-3xl font-bold text-center mb-2 text-white">
                <i className="fas fa-tractor mr-3 text-green-400"></i>
                Agricultural Recommendations for {formData.crop_type}
              </h1>
              <p className="text-gray-400 text-center mb-8">Personalized guidance based on current and forecasted weather conditions in {weatherData.city}</p>

              {/* Alerts Section */}
              {alerts.length > 0 && (
                <div className="mb-8">
                  <h3 className="text-xl font-semibold mb-4 text-white flex items-center">
                    <i className="fas fa-exclamation-triangle mr-3 text-yellow-400"></i>
                    Agricultural Alerts
                  </h3>
                  <div className="space-y-4">
                    {alerts.map((alert, index) => (
                      <div key={index} className={`alert alert-${alert.type}`}>
                        <i className={`fas ${alert.icon} mr-3 text-lg`}></i>
                        <span>{alert.message}</span>
                      </div>
                    ))}
                  </div>
                </div>
              )}

              <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-10">
                <div className="card p-6 rounded-2xl">
                  <h3 className="font-semibold text-xl mb-6 text-white flex items-center">
                    <i className="fas fa-cloud-sun mr-3 text-blue-400"></i>
                    Current Conditions
                  </h3>
                  <div className="text-center py-4">
                    <div className="text-6xl mb-6">
                      {getWeatherIcon(weatherData.condition, weatherData.rainChance)}
                    </div>
                    <div className="text-4xl font-bold text-white">{weatherData.temperature}°C</div>
                    <div className="text-xl text-gray-300 mt-2">{weatherData.condition}</div>
                    <div className="text-blue-400 font-medium mt-4 text-lg">Precipitation Probability: {weatherData.rainChance}%</div>
                    <div className="grid grid-cols-2 gap-4 mt-6">
                      <div className="text-center">
                        <div className="text-gray-400 text-sm">Humidity</div>
                        <div className="font-bold text-white">{weatherData.humidity}%</div>
                      </div>
                      <div className="text-center">
                        <div className="text-gray-400 text-sm">Wind Speed</div>
                        <div className="font-bold text-white">{weatherData.windSpeed} km/h</div>
                      </div>
                    </div>
                    <div className="mt-6">
                      <span className={`season-indicator season-${weatherData.season.toLowerCase()}`}>
                        {weatherData.season} Season
                      </span>
                    </div>
                    
                    {/* Irrigation Recommendation */}
                    <div className="mt-6 p-4 bg-gray-800 rounded-lg">
                      <h4 className="font-semibold text-white mb-2">Irrigation Recommendation</h4>
                      {formData.crop_type && (
                        <>
                          <div className="flex justify-between mb-2">
                            <span className="text-gray-300">Level:</span>
                            <span className={`font-bold ${getIrrigationClass(getIrrigationLevel(weatherData.temperature, weatherData.humidity, weatherData.rainChance, formData.crop_type, formData.soil_type))}`}>
                              {getIrrigationText(getIrrigationLevel(weatherData.temperature, weatherData.humidity, weatherData.rainChance, formData.crop_type, formData.soil_type))}
                            </span>
                          </div>
                          <div className="soil-moisture-bar">
                            <div 
                              className="soil-moisture-fill" 
                              style={{ 
                                width: `${getIrrigationLevel(weatherData.temperature, weatherData.humidity, weatherData.rainChance, formData.crop_type, formData.soil_type)}%` 
                              }}
                            ></div>
                          </div>
                        </>
                      )}
                    </div>
                  </div>
                </div>

                <div className="lg:col-span-2 bg-gradient-to-r from-green-900/30 to-green-800/20 p-8 rounded-2xl border border-green-700/30">
                  <h3 className="font-semibold text-2xl mb-6 text-white flex items-center">
                    <i className="fas fa-lightbulb mr-3 text-green-400"></i>
                    Agricultural Recommendations
                  </h3>
                  <ul className="space-y-4">
                    {advice.map((item, index) => (
                      <li key={index} className="flex items-start p-4 bg-gray-800/50 rounded-lg hover:bg-gray-800/70 transition-all">
                        <i className="fas fa-check text-green-500 mt-1 mr-4 text-lg"></i>
                        <span className="text-gray-300 text-lg">{item}</span>
                      </li>
                    ))}
                  </ul>
                </div>
              </div>

              <div className="bg-gradient-to-r from-blue-900/30 to-blue-800/20 p-8 rounded-2xl border border-blue-700/30 mb-8">
                <h3 className="text-2xl font-semibold mb-6 text-white">7-Day Weather Summary for {formData.crop_type}</h3>
                <div className="overflow-x-auto">
                  <table className="w-full text-base text-center">
                    <thead className="bg-blue-800/50">
                      <tr>
                        <th className="p-4">Day</th>
                        <th className="p-4">Date</th>
                        <th className="p-4">Conditions</th>
                        <th className="p-4">Temperature</th>
                        <th className="p-4">Rain Chance</th>
                        <th className="p-4">Agricultural Impact</th>
                      </tr>
                    </thead>
                    <tbody>
                      {weatherData.forecast.slice(0, 7).map((day, index) => (
                        <tr key={index} className="border-b border-blue-800/30 hover:bg-blue-900/20 transition-all">
                          <td className="p-4 font-medium">{day.day}</td>
                          <td className="p-4">{day.date}</td>
                          <td className="p-4">
                            <div className="flex items-center justify-center">
                              <span className="mr-2 text-xl">
                                {getWeatherIcon(day.condition, day.rainChance)}
                              </span>
                              {day.condition}
                            </div>
                          </td>
                          <td className="p-4 font-bold">{day.temp}°C</td>
                          <td className="p-4">
                            <span className={`font-semibold ${day.rainChance > 50 ? 'text-blue-400' : day.rainChance > 20 ? 'text-blue-300' : 'text-gray-400'}`}>
                              {day.rainChance}%
                            </span>
                          </td>
                          <td className="p-4 text-sm">
                            {day.rainChance > 50 ? 'Postpone field work' : 
                             day.temp > 35 ? 'Increase irrigation' : 
                             day.temp < 15 ? 'Protect from cold' : 'Favorable conditions'}
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>

              <div className="flex gap-4">
                <button
                  className="flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
                  onClick={() => setStep(2)}
                >
                  <i className="fas fa-arrow-left mr-3"></i>
                  Back to Weather Analysis
                </button>
                <button
                  className="flex-1 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-800 hover:to-gray-900 text-white py-4 rounded-lg font-medium transition-all duration-300 flex items-center justify-center text-lg"
                  onClick={() => {
                    setStep(1);
                    setFormData({
                      governorate: '',
                      city: '',
                      date: '',
                      forecast_period: '1 day',
                      crop_type: '',
                      soil_type: '',
                      farm_size: '',
                      irrigation_type: '',
                    });
                    setWeatherData(null);
                    setAdvice(null);
                    setAlerts([]);
                  }}
                >
                  <i className="fas fa-search mr-3"></i>
                  New Agricultural Analysis
                </button>
              </div>
            </div>
          </div>
        </div>
      );

      if (isInitialLoad) {
        return (
          <div className="min-h-screen flex flex-col relative">
            <Header />
            <LoadingScreen message="Initializing Agricultural Intelligence Systems" />
          </div>
        );
      }

      if (loading && step === 1) {
        return (
          <div className="min-h-screen flex flex-col relative">
            <Header />
            <LoadingScreen message="Processing Agricultural Weather Data" />
          </div>
        );
      }

      return (
        <div className="min-h-screen flex flex-col relative">
          <Header />
          <main className="flex-1 py-4 relative z-10">
            {currentPage === 'home' && (
              <>
                {step === 1 && renderStep1()}
                {step === 2 && weatherData && renderStep2()}
                {step === 3 && advice && renderStep3()}
              </>
            )}
            {currentPage === 'about' && <AboutPage />}
            {currentPage === 'crops' && <CropGuidePage />}
            {currentPage === 'dashboard' && <DashboardPage />}
          </main>
          <footer className="footer-gradient text-white py-6 text-center relative z-10 mt-12">
            <div className="container mx-auto">
              <p className="flex items-center justify-center space-x-2 text-lg">
                <i className="fas fa-seedling text-green-500"></i>
                <span>© 2025 Agricultural Intelligence - Advanced Weather System for Farmers</span>
              </p>
              <p className="text-gray-400 text-sm mt-2">Powered by satellite data, agricultural research, and climate modeling</p>
              <div className="flex justify-center space-x-6 mt-4 text-gray-500 text-sm">
                <span>Regional Focus</span>
                <span>•</span>
                <span>Local Crops</span>
                <span>•</span>
                <span>Agricultural Accuracy</span>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    // Render the app
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>

</html>
